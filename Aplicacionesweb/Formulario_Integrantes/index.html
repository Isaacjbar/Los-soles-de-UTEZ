<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <title>Page Title</title>
    <link rel='stylesheet' type='text/css' media='screen' href='bootstrap.css'>
</head>
<body>
    <div class="container"> 
        <div class="row">
            <div class="col"><!--Tendre el form-->
                <form id="formulario">
                    <div class="mb-3">
                      <label for="nombre" class="form-label">Nombre: </label>
                      <input name="nombres" type="text" class="form-control" id="nombres" aria-describedby="ayudaNombre">
                      <div id="ayudaNombre" class="form-text">Ingrese su nombre porfavor.</div>
                    </div>
                    <div class="mb-3">
                      <label for="matri" class="form-label">Matrícula: </label>
                      <input name="matri" type="text" class="form-control" id="matricula">
                    </div>
                    <button id="nuevo" type="button" class="btn btn-success">Nuevo registro</button>
                    <button type="submit" class="btn btn-primary">Registrar</button>
                  </form>
            </div>
            <div class="col"><!--Tendre la tabla-->
                <table class="table">
                    <thead>
                        <tr>
                            <th>Integrante</th>
                            <th>Matrícula</th>
                        </tr>
                    </thead>
                    <tbody id="contenido">
                        <!-- Llenar con JS -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <script src='js/bootstrap.js'></script>
    <script>
        let i = 2;
        let nuevo = document.getElementById("nuevo");
        nuevo.addEventListener("click", () => {
            //crear nuevos elementos para el form
            let div = document.createElement("div");
            div.setAttribute("class", "mb-3");
            let label_nombre = document.createElement("label");
            let input_nombre = document.createElement("input");
            label_nombre.setAttribute("for", "nombre" + i);
            label_nombre.setAttribute("class", "form-label");
            label_nombre.innerText = "Nombre " + i;
            input_nombre.setAttribute("name", "nombre" + i);
            input_nombre.setAttribute("type", "text");
            input_nombre.setAttribute("class", "form-control");

            div.appendChild(label_nombre);
            div.appendChild(input_nombre);
            document.getElementById("formulario").appendChild(div);

            i++;
        });
    </script>
    <script>
        //Script para llenar la tabla de manera dinamica
        const getParameter = (key) => {
            const address = window.location.search; // url de la ventana actual
            const parameterList = new URLSearchParams(address); // Objeto de tipo URLSearchParams
            return parameterList.get(key); // Regresa el valor del parámetro “key”
        }

        const nombre = getParameter("nombre");
        const matricula = getParameter("matri");

        const address = window.location.search;
        const parameterList = new URLSearchParams(address);

        //Pintar la información en la tabla
        function pintar(nombre, matricula) {
            const tbody = document.getElementById("contenido");
            const row = document.createElement("tr");
            const celda1 = document.createElement("td");
            const celda2 = document.createElement("td");
            celda1.innerText = nombre;
            celda2.innerText = matricula;
            row.appendChild(celda1);
            row.appendChild(celda2);
            tbody.appendChild(row);
        }

        //lista se pueden iterar en un foreach
        parameterList.forEach((value, key) => {
            if (key.startsWith('nombre')) {
                pintar(value, "vacio");
            }
        });
    </script>
</body>
</html>
